# テスター育成講義：デシジョンテーブル作成演習

## 【演習課題1：ECサイトのクーポン適用判定】

以下の仕様を読み、すべての条件の組み合わせを網羅した**デシジョンテーブル**を作成してください。

### **＜仕様：割引適用ルール＞**
あるECサイトでは、注文時に以下のルールで割引を適用します。

1. **会員ランク：** 「プレミアム会員」である。
2. **購入金額：** 合計金額が「5,000円以上」である。
3. **クーポン利用：** 有効な「割引クーポン」を持っている。

### **＜割引内容の判定＞**

* **20%OFF：** 「プレミアム会員」かつ「5,000円以上」の場合に適用される。
* **10%OFF：** 上記（20%OFF）に該当せず、「プレミアム会員」または「5,000円以上」のどちらかを満たし、かつ「クーポン」を持っている場合に適用される。
* **割引なし：** 上記のいずれにも該当しない場合。

---

### 【講師用：解答例】

講師の方が解説する際の正解データです。条件の組み合わせ（通り）に基づいたテーブルです。

| 条件 (Conditions) | 1 | 2 | 3 | 4 | 5 | 6 | 7 | 8 |
| --- | --- | --- | --- | --- | --- | --- | --- | --- |
| ① プレミアム会員である | Y | Y | Y | Y | N | N | N | N |
| ② 購入金額が5,000円以上 | Y | Y | N | N | Y | Y | N | N |
| ③ クーポンを持っている | Y | N | Y | N | Y | N | Y | N |
| **動作 (Actions)** |  |  |  |  |  |  |  |  |
| **20% OFF** | **X** | **X** |  |  |  |  |  |  |
| **10% OFF** |  |  | **X** |  | **X** |  |  |  |
| **割引なし** |  |  |  | **X** |  | **X** | **X** | **X** |

#### 解説のポイント

* **列1・2：** 会員かつ5,000円以上の場合は、クーポンの有無に関わらず「20%OFF」が優先されます。
* **列3・5：** 20%OFFの条件は満たさないが、片方の条件を満たし、かつクーポンがあるため「10%OFF」となります。
* **列4・6：** 条件を一つ満たしていても、クーポンがないため「割引なし」となります。
* **列7・8：** 会員でもなく5,000円未満であれば、クーポンがあっても「割引なし」となります。

---

## 【演習課題2：宿泊予約のキャンセル料判定ロジック】

以下の複雑な仕様を読み、漏れのないデシジョンテーブルを作成してください。今回は条件の組み合わせによって「ありえないケース」も含まれますが、それらも含めて整理した上で、アクション（結果）を導き出してください。

### **＜仕様：キャンセルポリシー＞**
宿泊予約のキャンセル料率は、以下の3つの条件によって判定されます。

1. **連絡の有無：** 「事前に連絡あり」か「無連絡（不泊）」か。
2. **キャンセル時期：** 「前日以前」か「当日」か。
3. **予約種別：** 「通常予約」か「早期割引プラン（変更不可）」か。

### **＜キャンセル料の判定ルール＞**

* **100%（全額）：**
  * 「無連絡」の場合。（時期やプランに関わらず一律）
  * 「当日」のキャンセルで、かつ「早期割引プラン」の場合。


* **80%：**
  * 「当日」のキャンセルで、かつ「通常予約」の場合。


* **50%：**
  * 「前日以前」のキャンセルで、かつ「早期割引プラン」の場合。


* **なし（0%）：**
  * 「前日以前」のキャンセルで、かつ「通常予約」の場合。



### **＜注意＞**

* 「無連絡」かつ「前日以前」という組み合わせは、論理的に「当日」を過ぎないと「無連絡」とは確定しないため、実務上は「当日」の扱い（または考慮不要）として整理してください。

---

### 【講師用：解答例】

この課題のポイントは、**「無連絡」という条件が他の条件（時期）を上書きする点**と、**プランによる料率の違い**を正確にマッピングできるかです。

| 条件 (Conditions) | 1 | 2 | 3 | 4 | 5 | 6 |
| --- | --- | --- | --- | --- | --- | --- |
| ① 事前に連絡がある | Y | Y | Y | Y | N | N |
| ② キャンセル時期 | 当日 | 当日 | 前日以前 | 前日以前 | 当日 | 当日 |
| ③ 予約種別 | 通常 | 早割 | 通常 | 早割 | 通常 | 早割 |
| **動作 (Actions)** |  |  |  |  |  |  |
| **キャンセル料 100%** |  | **X** |  |  | **X** | **X** |
| **キャンセル料 80%** | **X** |  |  |  |  |  |
| **キャンセル料 50%** |  |  |  | **X** |  |  |
| **キャンセル料 なし** |  |  | **X** |  |  |  |

#### 解説

1. **条件の整理（圧縮）：**
* 「無連絡（条件①がN）」の場合、時期が「前日以前」になることは論理的にありえません。そのため、無連絡の場合は「当日」のケースのみを記載するか、備考として除外することを教えます。
* 無連絡であればプラン（条件③）に関わらず100%になるため、列5と6を統合して「無連絡なら100%」と簡略化するテクニック（Y/N/- 表記）を教えるのも有効です。


2. **優先順位の理解：**
* 「無連絡」という最強の条件が、プランや時期のルールをどう上書きしているかを視覚化できているかが重要です。


3. **実務への応用：**
* 「仕様書には書かれていない『ありえない組み合わせ』をどう扱うか」を議論させることで、テストエンジニアとしての「仕様の不備を見抜く力」を養います。

---

## 【演習課題3：テーマパーク入場料金の判定】

以下の複雑な料金体系を読み、すべてのパターンを網羅したデシジョンテーブルを作成してください。

### **＜仕様：料金区分と割引ルール＞**

1. **会員ランク（3種類）：**
* 「ダイヤモンド会員」「ゴールド会員」「一般（非会員）」


2. **所持クーポン（3種類）：**
* 「全額無料クーポン」「500円引クーポン」「なし」


3. **年齢区分（4種類）：**
* 「幼児（未就学児）」「小学生」「中学生以上（一般）」「シニア（65歳以上）」



### **＜判定ルール：優先順位の高い順に適用＞**

* **ルールA：** 「全額無料クーポン」を持っている場合は、会員ランクや年齢に関わらず**「0円」**。
* **ルールB：** 「幼児」は、クーポンや会員ランクに関わらず常に**「0円」**。
* **ルールC：** 「ダイヤモンド会員」は、クーポンが「なし」または「500円引」であっても、常に**「一律 1,000円」**（年齢区分が小学生以上の場合）。
* **ルールD：** 上記以外（ゴールド会員・一般）の場合、各年齢の「基本料金」からクーポンの割引を適用する。
* ゴールド会員は基本料金からさらに「10%OFF」した後にクーポン割引を適用する。

* **シニア割引：** シニアは「中学生以上」の基本料金から2,000円引きとする。

---

### 解答

全ての組み合わせを愚直に書くと  通りになりますが、実務では**「結果に影響しない条件」をダッシュ（ー）で省略**し、テーブルを圧縮することが重要です。以下はその圧縮版の解答例です。

| 条件 (Conditions) | 1 | 2 | 3 | 4 | 5 | 6 | 7 | 8 | 9 |
| --- | --- | --- | --- | --- | --- | --- | --- | --- | --- |
| ① 年齢区分 | 幼児 | - | 小学生以上 | 小学生 | 一般 | シニア | 小学生 | 一般 | シニア |
| ② クーポン | - | 全額無料 | - | 500円/無 | 500円/無 | 500円/無 | 500円/無 | 500円/無 | 500円/無 |
| ③ 会員ランク | - | - | ダイヤ | ゴールド | ゴールド | ゴールド | 一般 | 一般 | 一般 |
| **動作 (Actions)** |  |  |  |  |  |  |  |  |  |
| **料金：0円** | **X** | **X** |  |  |  |  |  |  |  |
| **料金：1,000円** |  |  | **X** |  |  |  |  |  |  |
| **料金：個別計算A** |  |  |  | **X** |  |  |  |  |  |
| **料金：個別計算B** |  |  |  |  | **X** |  |  |  |  |
| **料金：個別計算C** |  |  |  |  |  | **X** |  |  |  |
| **料金：定価ベースA** |  |  |  |  |  |  | **X** |  |  |
| **料金：定価ベースB** |  |  |  |  |  |  |  | **X** |  |
| **料金：定価ベースC** |  |  |  |  |  |  |  |  | **X** |

#### 解説

1. **条件の圧縮（Don't Care の活用）：**
* 列1：「幼児」であれば他が何であっても0円。
* 列2：「全額無料クーポン」があれば他が何であっても0円。
* これらを「-（不問）」としてまとめることで、テストケースを劇的に減らせることを伝えます。

2. **優先順位の整理：**
* 「ダイヤモンド会員かつ小学生」の場合、ダイヤ特典（1,000円）が優先されるのか、クーポンが優先されるのか、仕様の読み解き能力を問います。

3. **境界値テストとの連携：**
* デシジョンテーブルで「シニア」という条件が出たら、別途「64歳と65歳」の境界値テストが必要になるという視点を持たせると、より実践的な講義になります。

4. **まとめ：**
* この課題は、受講生が「36個もセルを書くのは大変だ」と気づき、いかに論理的に「まとめられるか」を考えるきっかけになります。

今回の題材は「スマート家電（見守りエアコン）の自動制御ロジック」です。

## 【演習課題4：スマートエアコンの異常検知と自動制御】

**＜仕様：システム条件＞**

1. **室温：** 「30度以上」か「30度未満」か。
2. **人感センサー：** 「反応あり（在室）」か「反応なし（不在）」か。
3. **モード設定：** 「見守りモードON」か「見守りモードOFF」か。

**＜判定ルール：実行されるアクション＞**

* **エアコン作動：**
  * 「30度以上」かつ「在室」なら、**「冷房ON」**にする。
  * 「30度以上」かつ「不在」かつ「見守りモードON」なら、**「冷房ON（省エネ設定）」**にする。

* **プッシュ通知：**
  * 「30度以上」かつ「見守りモードON」なら、スマホへ**「高温通知」**を送る。

* **緊急通報：**
  * 「30度以上」かつ「在室」かつ「見守りモードON」が**10分間継続**した場合、**「緊急連絡先へ通報」**する。

* **ログ記録：**
  * エアコンが作動した場合は必ず**「作動ログ」**を記録する。
  * 30度以上で「見守りモードOFF」かつ「不在」の場合は、何もせず**「未作動ログ」**のみ記録する。
  * 室温が「N（30度未満）」の場合は何もせず**「未作動ログ」**のみ記録する。

---

### 解答

| 条件 (Conditions) | 1 | 2 | 3 | 4 | 5 |
| --- | --- | --- | --- | --- | --- |
| ① 室温が30度以上 | Y | Y | Y | Y | N |
| ② 人感センサー（在室） | Y | Y | N | N | Y |
| ③ 見守りモードON | Y | N | Y | N | - |
| **動作 (Actions)** |  |  |  |  |  |
| **冷房ON（通常）** | **X** | **X** |  |  |  |
| **冷房ON（省エネ）** |  |  | **X** |  |  |
| **プッシュ通知送信** | **X** |  | **X** |  |  |
| **緊急連絡先へ通報** | **X** |  |  |  |  |
| **ログ：作動記録** | **X** | **X** | **X** |  |  |
| **ログ：未作動記録** |  |  |  | **X** | **X** |

#### 解説

1. **アクションの波及効果：**
* 「緊急通報（列1）」が発生する時は、同時に「冷房ON」「通知」「作動ログ」も発生します。これらが仕様通りすべて「X」になっているかを確認させます。


2. **「何もしない」という仕様の扱い：**
* 条件4、5、6ではエアコンは動きませんが、「ログを記録する」というアクションが存在します。初心者は「エアコンが動かない＝アクションなし」とミスしやすいため、注意深く読み解くよう指導します。


3. **不問（-）の活用：**
* 室温が「N（30度未満）」の場合、在室やモードに関わらず一律で「未作動ログ」になるため、列5と6を統合できることを教えると中級者へのステップアップになります。